{"remainingRequest":"/Users/hequanshawu/code/dora-vue/Dora-Vue/node_modules/babel-loader/lib/index.js!/Users/hequanshawu/code/dora-vue/Dora-Vue/src/store/model/User.js","dependencies":[{"path":"/Users/hequanshawu/code/dora-vue/Dora-Vue/src/store/model/User.js","mtime":1634644590000},{"path":"/Users/hequanshawu/code/dora-vue/Dora-Vue/node_modules/cache-loader/dist/cjs.js","mtime":1634793903993},{"path":"/Users/hequanshawu/code/dora-vue/Dora-Vue/node_modules/babel-loader/lib/index.js","mtime":1634793907255}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwpjb25zdCBVc2VyID0gewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgLy8g5Y6f5pWw5o2uCiAgc3RhdGU6IHsKICAgIC8vIOaYr+WQpueZu+W9lQogICAgbG9naW46IGZhbHNlLAogICAgdXNlcjogbnVsbCAvLyB7CiAgICAvLyAgIC8vIOeUqOaIt2lkCiAgICAvLyAgIHVzZXJJZDogMCwKICAgIC8vICAgLy8g55So5oi35ZCNCiAgICAvLyAgIG5hbWU6ICcnLAogICAgLy8gICAvLyDnlKjmiLfpgq7nrrEKICAgIC8vICAgZW1haWw6ICcnLAogICAgLy8gICAvLyDnlKjmiLflpLTlg49pZCDnlKjmnaXmn6Xor6LpnZnmgIHotYTmupBhcGkKICAgIC8vICAgYXZhdGFySWQ6ICcnLAogICAgLy8gfSwKCiAgfSwKICAvLyDlkIznrYnkuI5kYW8KICBtdXRhdGlvbnM6IHsKICAgIHNldFVzZXIoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLnVzZXIgPSB7CiAgICAgICAgdXNlcklkOiB2YWx1ZS51c2VySWQsCiAgICAgICAgbmFtZTogdmFsdWUubmFtZSwKICAgICAgICBlbWFpbDogdmFsdWUuZW1haWwsCiAgICAgICAgYXZhdGFySWQ6IDAKICAgICAgfTsgLy8g5LuO5ZCO56uv6I635b6X55qE55So5oi35oul5pyJ55qE5Zu+54mH6ZuG5ZCICgogICAgICBpZiAodmFsdWUuaW1hZ2VzICE9PSBbXSAmJiB2YWx1ZS5pbWFnZXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgIC8vIOW+queOr+WbvueJh+mbhuWQiAogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUuaW1hZ2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAvLyDmkJzntKLlpLTlg4/nmoRpZAogICAgICAgICAgdmFyIGluZGV4ID0gdmFsdWUuaW1hZ2VzW2ldLm5hbWUuaW5kZXhPZigiYXZhdGFyIik7IC8vIOWIpOaWreaQnOe0ouWIsOeahOe0ouW8lQoKICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgLy8g5aaC5p6c5LiN5Li6LTHvvIzpgqPkuYjlsLHlsIbor6Xlvqrnjq/nmoTlm77niYdpZOWtmOWFpeWIsHZ1ZXjnmoR1c2Vy5a+56LGh5LitCiAgICAgICAgICAgIHN0YXRlLnVzZXIuYXZhdGFySWQgPSB2YWx1ZS5pbWFnZXNbaV0uaWQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDlpoLmnpzkuLotMe+8jOmCo+S5iOWwsee7meS7lum7mOiupOWktOWDj2lkCiAgICAgICAgICAgIHN0YXRlLnVzZXIuYXZhdGFySWQgPSAxOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBzdGF0ZS51c2VyLmF2YXRhcklkID0gdmFsdWUuYXZhdGFySWQ7CiAgICAgIH0gLy8g5bCG55So5oi35L+h5oGv5a2YY29va2ll5LitCgoKICAgICAgVnVlLiRjb29raWVzLnNldCgidXNlciIsIHN0YXRlLnVzZXIpOwoKICAgICAgaWYgKHN0YXRlLnVzZXIudXNlcklkICE9PSAwKSB7CiAgICAgICAgc3RhdGUubG9naW4gPSB0cnVlOwogICAgICB9CiAgICB9LAoKICAgIGRlbFVzZXIoc3RhdGUpIHsKICAgICAgLy8g5riF6ZmkVnVleOS4reeahHVzZXLnlKjmiLfmlbDmja4KICAgICAgc3RhdGUudXNlciA9IG51bGw7IC8vIOa4healmmNvb2tpZeS4reeahHVzZXIKCiAgICAgIFZ1ZS4kY29va2llcy5yZW1vdmUoInVzZXIiKTsgLy8g5Yig6ZmkbG9jYWxTdG9yYWdl5Lit55qEdG9rZW4KCiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ0b2tlbiIpOwogICAgfSwKCiAgICB1cGRhdGVVc2VyKHN0YXRlLCB2YWx1ZSkgewogICAgICBzdGF0ZS51c2VyID0gdmFsdWU7CiAgICAgIHN0YXRlLmxvZ2luID0gdHJ1ZTsKICAgIH0KCiAgfSwKICAvLyDlkIznrYnkuI5zZXJ2aWNlCiAgYWN0aW9uczogewogICAgLy8g55m75b2V5ZCO5Lyg5YWl5pWw5o2uCiAgICBTZXRVc2VyKGNvbnRleHQsIHZhbHVlKSB7CiAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyJywgdmFsdWUpOwogICAgICByZXR1cm4gY29udGV4dC5zdGF0ZS5sb2dpbjsKICAgIH0sCgogICAgLy8g5rOo6ZSA77yM5Yig6ZmkbG9jYWxTdG9yYWdl5Lit55qEdG9rZW4KICAgIExvZ291dFVzZXIoY29udGV4dCkgewogICAgICBjb250ZXh0LmNvbW1pdCgnZGVsVXNlcicpOwogICAgICByZXR1cm4gY29udGV4dC5zdGF0ZS5sb2dpbjsKICAgIH0sCgogICAgVXBkYXRlVXNlcihjb250ZXh0LCB2YWx1ZSkgewogICAgICBjb250ZXh0LmNvbW1pdCgndXBkYXRlVXNlcicsIHZhbHVlKTsKICAgICAgcmV0dXJuIGNvbnRleHQuc3RhdGUubG9naW47CiAgICB9LAoKICAgIFJlcVVzZXJEYXRhKGNvbnRleHQpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgIFZ1ZS5heGlvcy5wb3N0KCcvcHVibGljLWRhdGEvdXNlci1kYXRhJykudGhlbihyZXEgPT4gewogICAgICAgICAgaWYgKHJlcS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgbGV0IHVzZXIgPSB7CiAgICAgICAgICAgICAgdXNlcklkOiByZXEuZGF0YS5qc29uLnVzZXJJZCwKICAgICAgICAgICAgICBuYW1lOiByZXEuZGF0YS5qc29uLnVzZXJuYW1lLAogICAgICAgICAgICAgIGVtYWlsOiByZXEuZGF0YS5qc29uLmVtYWlsLAogICAgICAgICAgICAgIGltYWdlczogcmVxLmRhdGEuanNvbi5pbWFnZXMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFVzZXInLCB1c2VyKTsKICAgICAgICAgICAgcmVzb2x2ZSh7CiAgICAgICAgICAgICAgdXNlcjogY29udGV4dC5zdGF0ZS51c2VyLAogICAgICAgICAgICAgIGxvZ2luOiBjb250ZXh0LnN0YXRlLmxvZ2luCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gdG9rZW7ov4fmnJ/vvIzliKDpmaQKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInRva2VuIik7CiAgICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICAgIHVzZXI6IG51bGwsCiAgICAgICAgICAgICAgbG9naW46IGZhbHNlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCgogICAgLy8g55m75b2V6K+35rGCCiAgICBMb2dpblJlcShjb250ZXh0LCB2YWx1ZSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIFZ1ZS5heGlvcy5wb3N0KCIvYXV0aC9sb2dpbiIsIHsKICAgICAgICAgIG1ldGhvZDogdmFsdWUubWV0aG9kLAogICAgICAgICAgdXNlcm5hbWU6IHZhbHVlLnVzZXJuYW1lLAogICAgICAgICAgcGFzc3dvcmQ6IHZhbHVlLnBhc3N3b3JkLAogICAgICAgICAgcmVtZW1iZXJNZTogdmFsdWUucmVtZW1iZXJNZQogICAgICAgIH0pLnRoZW4ocmVxID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcSk7CgogICAgICAgICAgaWYgKHJlcS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgLy8g5bCG55So5oi35pWw5o2u6L+b6KGM5bCB6KOFCiAgICAgICAgICAgIGxldCB1c2VyID0gewogICAgICAgICAgICAgIHVzZXJJZDogcmVxLmRhdGEuanNvbi51c2VySWQsCiAgICAgICAgICAgICAgbmFtZTogcmVxLmRhdGEuanNvbi51c2VybmFtZSwKICAgICAgICAgICAgICBlbWFpbDogcmVxLmRhdGEuanNvbi5lbWFpbCwKICAgICAgICAgICAgICBpbWFnZXM6IHJlcS5kYXRhLmpzb24uaW1hZ2VzCiAgICAgICAgICAgIH07IC8vIOS/neWtmHRva2VuCgogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uKTsgLy8g55m75b2V5oiQ5YqfCgogICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlcicsIHVzZXIpOyAvLyDov5Tlm57mj5DnpLoKCiAgICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsCiAgICAgICAgICAgICAgbXNnOiByZXEuZGF0YS5tc2cKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDnmbvlvZXlpLHotKUKICAgICAgICAgICAgcmVzb2x2ZSh7CiAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsCiAgICAgICAgICAgICAgbXNnOiByZXEuZGF0YS5tc2cKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgcmVqZWN0KCLnmbvlvZXlvILluLjvvIzor7fnqI3lkI7lho3or5UiKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogIH0KfTsKZXhwb3J0IGRlZmF1bHQgVXNlcjs="},{"version":3,"sources":["/Users/hequanshawu/code/dora-vue/Dora-Vue/src/store/model/User.js"],"names":["Vue","User","namespaced","state","login","user","mutations","setUser","value","userId","name","email","avatarId","images","undefined","i","length","index","indexOf","id","$cookies","set","delUser","remove","localStorage","removeItem","updateUser","actions","SetUser","context","commit","LogoutUser","UpdateUser","ReqUserData","Promise","resolve","axios","post","then","req","data","success","json","username","LoginReq","reject","method","password","rememberMe","console","log","setItem","headers","authorization","msg","catch"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\r\n\r\nconst User = {\r\n    namespaced: true,\r\n    // 原数据\r\n    state: {\r\n        // 是否登录\r\n        login: false,\r\n        user: null,\r\n        // {\r\n        //   // 用户id\r\n        //   userId: 0,\r\n        //   // 用户名\r\n        //   name: '',\r\n        //   // 用户邮箱\r\n        //   email: '',\r\n        //   // 用户头像id 用来查询静态资源api\r\n        //   avatarId: '',\r\n        // },\r\n\r\n    },\r\n    // 同等与dao\r\n    mutations: {\r\n        setUser(state,value) {\r\n\r\n            state.user = {\r\n                userId : value.userId,\r\n                name: value.name,\r\n                email : value.email,\r\n                avatarId: 0,\r\n            }\r\n            // 从后端获得的用户拥有的图片集合\r\n            if (value.images !== [] && value.images !== undefined) {\r\n                // 循环图片集合\r\n                for (let i = 0; i < value.images.length; i++) {\r\n                    // 搜索头像的id\r\n                    var index = value.images[i].name.indexOf(\"avatar\");\r\n                    // 判断搜索到的索引\r\n                    if (index !== -1) {\r\n                        // 如果不为-1，那么就将该循环的图片id存入到vuex的user对象中\r\n                        state.user.avatarId = value.images[i].id;\r\n                    } else {\r\n                        // 如果为-1，那么就给他默认头像id\r\n                        state.user.avatarId = 1;\r\n                    }\r\n                }\r\n            } else {\r\n                state.user.avatarId = value.avatarId;\r\n            }\r\n            // 将用户信息存cookie中\r\n            Vue.$cookies.set(\"user\",state.user);\r\n            if ( state.user.userId !== 0 ) {\r\n                state.login = true;\r\n            }\r\n        },\r\n        delUser(state) {\r\n            // 清除Vuex中的user用户数据\r\n            state.user = null;\r\n            // 清楚cookie中的user\r\n            Vue.$cookies.remove(\"user\");\r\n            // 删除localStorage中的token\r\n            localStorage.removeItem(\"token\");\r\n        },\r\n        updateUser(state,value) {\r\n            state.user = value;\r\n            state.login = true;\r\n        }\r\n    },\r\n    // 同等与service\r\n    actions: {\r\n        // 登录后传入数据\r\n        SetUser(context, value) {\r\n            context.commit('setUser', value);\r\n            return context.state.login;\r\n        },\r\n        // 注销，删除localStorage中的token\r\n        LogoutUser(context) {\r\n            context.commit('delUser');\r\n            return context.state.login;\r\n        },\r\n        UpdateUser(context, value) {\r\n            context.commit('updateUser', value);\r\n            return context.state.login;\r\n        },\r\n        ReqUserData(context) {\r\n            return new Promise(resolve => {\r\n                Vue.axios.post('/public-data/user-data').then(req => {\r\n                    if (req.data.success) {\r\n                        let user = {\r\n                            userId: req.data.json.userId,\r\n                            name: req.data.json.username,\r\n                            email: req.data.json.email,\r\n                            images: req.data.json.images,\r\n                        };\r\n                        context.commit('setUser', user);\r\n                        resolve({\r\n                            user: context.state.user,\r\n                            login: context.state.login\r\n                        });\r\n                    } else {\r\n                        // token过期，删除\r\n                        localStorage.removeItem(\"token\");\r\n                        resolve({\r\n                            user: null,\r\n                            login: false,\r\n                        });\r\n                    }\r\n                })\r\n            })\r\n        },\r\n        // 登录请求\r\n        LoginReq(context, value) {\r\n            return new Promise( (resolve, reject) => {\r\n                Vue.axios.post(\"/auth/login\", {\r\n                    method: value.method,\r\n                    username: value.username,\r\n                    password: value.password,\r\n                    rememberMe: value.rememberMe\r\n                }).then(req => {\r\n                    console.log(req)\r\n                    if (req.data.success) {\r\n                        // 将用户数据进行封装\r\n                        let user = {\r\n                            userId: req.data.json.userId,\r\n                            name: req.data.json.username,\r\n                            email: req.data.json.email,\r\n                            images: req.data.json.images,\r\n                        };\r\n                        // 保存token\r\n                        localStorage.setItem(\"token\", req.headers.authorization);\r\n                        // 登录成功\r\n                        context.commit('setUser',user);\r\n\r\n                        // 返回提示\r\n                        resolve({\r\n                            success: true,\r\n                            msg: req.data.msg\r\n                        })\r\n\r\n                    } else {\r\n                        // 登录失败\r\n                        resolve({\r\n                            success: false,\r\n                            msg: req.data.msg\r\n                        })\r\n                    }\r\n                }).catch(() => {\r\n                    reject(\"登录异常，请稍后再试\")\r\n                });\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport default User;"]}]}