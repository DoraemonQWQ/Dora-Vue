{"remainingRequest":"/Users/hequanshawu/code/dora-vue/Dora-Vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hequanshawu/code/dora-vue/Dora-Vue/src/components/Login&Register/LoginMain.vue?vue&type=style&index=0&id=1b4a0ba3&scoped=true&lang=css&","dependencies":[{"path":"/Users/hequanshawu/code/dora-vue/Dora-Vue/src/components/Login&Register/LoginMain.vue","mtime":1634634732000},{"path":"/Users/hequanshawu/code/dora-vue/Dora-Vue/node_modules/css-loader/dist/cjs.js","mtime":1634793906066},{"path":"/Users/hequanshawu/code/dora-vue/Dora-Vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1634793912117},{"path":"/Users/hequanshawu/code/dora-vue/Dora-Vue/node_modules/postcss-loader/src/index.js","mtime":1634793907149},{"path":"/Users/hequanshawu/code/dora-vue/Dora-Vue/node_modules/cache-loader/dist/cjs.js","mtime":1634793903993},{"path":"/Users/hequanshawu/code/dora-vue/Dora-Vue/node_modules/vue-loader/lib/index.js","mtime":1634793909391}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KI2xvZ2luLW1haW4gew0KDQogIG1hcmdpbi1ib3R0b206IDEwMHB4Ow0KfQ0KLmZvcm0gew0KICBoZWlnaHQ6IDM0MnB4Ow0KfQ0KLnN3aXRjaC1idXR0b24gew0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIG1hcmdpbi10b3A6IC0zNXB4Ow0KICBtYXJnaW4tYm90dG9tOiAyNXB4Ow0KfQ0KLnN3aXRjaC1idXR0b24gc3BhbiB7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgZm9udC1zaXplOiAxNHB4Ow0KICBjb2xvcjogYmx1ZTsNCn0NCg0KDQo="},{"version":3,"sources":["LoginMain.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmUA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginMain.vue","sourceRoot":"src/components/Login&Register","sourcesContent":["<template>\r\n<div id=\"login-main\">\r\n  <el-row tag=\"div\">\r\n    <!-- 768px以上 - 1200px以下的登录表单 -->\r\n    <!-- 用户名登录表单 -->\r\n    <el-col class=\"form hidden-xs-only hidden-lg-and-up\" v-if=\"swicth\">\r\n      <div class=\"switch-button\"><span @click=\"swicth = !swicth\">邮箱登录</span></div>\r\n      <el-form :model=\"usernameForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"150px\">\r\n        <el-form-item  label=\"用户名\" prop=\"username\">\r\n          <el-input type=\"text\" v-model=\"usernameForm.username\" autocomplete=\"off\" placeholder=\"输入你注册时的用户名哟~\" style=\"padding-right: 150px\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input type=\"password\" v-model=\"usernameForm.password\" autocomplete=\"off\" placeholder=\"输入你的密码哟~\" style=\"padding-right: 150px\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"0\" style=\"text-align: center\">\r\n          <el-checkbox v-model=\"usernameForm.rememberMe\">记住我</el-checkbox>\r\n        </el-form-item>\r\n        <el-form-item style=\"text-align: center\" label-width=\"0\">\r\n          <el-button type=\"primary\" :disabled=\"disabled\" :loading=\"loading\" @click=\"submitForm(loginMethods[0])\">登录</el-button>\r\n          <el-button @click=\"goRegister\">注册</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n    <!-- 邮箱登录表单 -->\r\n    <el-col class=\"form hidden-xs-only hidden-lg-and-up\" v-if=\"!swicth\">\r\n      <div class=\"switch-button\"><span @click=\"swicth = !swicth\">用户名登录</span></div>\r\n      <el-form :model=\"emailForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"150px\">\r\n        <el-form-item  label=\"邮箱\" prop=\"email\">\r\n          <el-input type=\"text\" v-model=\"emailForm.email\" autocomplete=\"off\" placeholder=\"输入你注册时的邮箱哟~\" style=\"padding-right: 150px\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input type=\"password\" v-model=\"emailForm.password\" autocomplete=\"off\" placeholder=\"输入你的密码哟~\" style=\"padding-right: 150px\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"0\" style=\"text-align: center\">\r\n          <el-checkbox v-model=\"emailForm.rememberMe\">记住我</el-checkbox>\r\n        </el-form-item>\r\n        <el-form-item style=\"text-align: center\" label-width=\"0\">\r\n          <el-button type=\"primary\" :disabled=\"disabled\" :loading=\"loading\" @click=\"submitForm(loginMethods[1])\">登录</el-button>\r\n          <el-button  @click=\"goRegister\">注册</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n\r\n    <!-- 1200px以上 - 1920px以下的登录表单 -->\r\n    <!-- 用户名登录表单 -->\r\n    <el-col class=\"form hidden-md-and-down hidden-xl-only\" v-if=\"swicth\">\r\n      <div class=\"switch-button\"><span @click=\"swicth = !swicth\">邮箱登录</span></div>\r\n      <el-form :model=\"usernameForm\" status-icon :rule=\"rules\" ref=\"ruleForm\" label-width=\"300px\">\r\n        <el-form-item  label=\"用户名\" prop=\"username\">\r\n          <el-input type=\"text\" v-model=\"usernameForm.username\" autocomplete=\"off\" placeholder=\"输入你注册时的用户名哟~\" style=\"padding-right: 300px\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input type=\"password\" v-model=\"usernameForm.password\" autocomplete=\"off\" placeholder=\"输入你的密码哟~\" style=\"padding-right: 300px\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"0\" style=\"text-align: center\">\r\n          <el-checkbox v-model=\"usernameForm.rememberMe\">记住我</el-checkbox>\r\n        </el-form-item>\r\n        <el-form-item style=\"text-align: center\" label-width=\"0\">\r\n          <el-button type=\"primary\" :disabled=\"disabled\" :loading=\"loading\" @click=\"submitForm(loginMethods[0])\">登录</el-button>\r\n          <el-button @click=\"goRegister\">注册</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n    <!-- 邮箱登录表单 -->\r\n    <el-col class=\"form hidden-md-and-down hidden-xl-only\" v-if=\"!swicth\">\r\n      <div class=\"switch-button\"><span @click=\"swicth = !swicth\">用户名登录</span></div>\r\n      <el-form :model=\"emailForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"300px\">\r\n        <el-form-item  label=\"邮箱\" prop=\"email\">\r\n          <el-input type=\"text\" v-model=\"emailForm.email\" autocomplete=\"off\" placeholder=\"输入你注册时的邮箱哟~\" style=\"padding-right: 300px\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input type=\"password\" v-model=\"emailForm.password\" autocomplete=\"off\" placeholder=\"输入你的密码哟~\" style=\"padding-right: 300px\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"0\" style=\"text-align: center\">\r\n          <el-checkbox v-model=\"emailForm.rememberMe\">记住我</el-checkbox>\r\n        </el-form-item>\r\n        <el-form-item style=\"text-align: center\" label-width=\"0\">\r\n          <el-button type=\"primary\" :disabled=\"disabled\" :loading=\"loading\" @click=\"submitForm(loginMethods[1])\">登录</el-button>\r\n          <el-button  @click=\"goRegister\">注册</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n\r\n    <!-- 1920px以上的登录表单-->\r\n    <!-- 用户名登录表单 -->\r\n    <el-col class=\"form hidden-lg-and-down\" v-if=\"swicth\">\r\n      <div class=\"switch-button\"><span @click=\"swicth = !swicth\">邮箱登录</span></div>\r\n      <el-form :model=\"usernameForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"500px\">\r\n        <el-form-item  label=\"用户名\" prop=\"username\">\r\n          <el-input type=\"text\" v-model=\"usernameForm.username\" autocomplete=\"off\" placeholder=\"输入你注册时的用户名哟~\" style=\"padding-right: 500px\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input type=\"password\" v-model=\"usernameForm.password\" autocomplete=\"off\" placeholder=\"输入你的密码哟~\" style=\"padding-right: 500px\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"0\" style=\"text-align: center\">\r\n          <el-checkbox v-model=\"usernameForm.rememberMe\">记住我</el-checkbox>\r\n        </el-form-item>\r\n        <el-form-item style=\"text-align: center\" label-width=\"0\">\r\n          <el-button type=\"primary\" :disabled=\"disabled\" :loading=\"loading\" @click=\"submitForm(loginMethods[0])\">登录</el-button>\r\n          <el-button @click=\"goRegister\">注册</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n    <!-- 邮箱登录表单 -->\r\n    <el-col class=\"form hidden-lg-and-down\" v-if=\"!swicth\">\r\n      <div class=\"switch-button\"><span @click=\"swicth = !swicth\">用户名登录</span></div>\r\n      <el-form :model=\"emailForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"500px\">\r\n        <el-form-item  label=\"邮箱\" prop=\"email\">\r\n          <el-input type=\"text\" v-model=\"emailForm.email\" autocomplete=\"off\" placeholder=\"输入你注册时的邮箱哟~\" style=\"padding-right: 500px\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input type=\"password\" v-model=\"emailForm.password\" autocomplete=\"off\" placeholder=\"输入你的密码哟~\" style=\"padding-right: 500px\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"0\" style=\"text-align: center\">\r\n          <el-checkbox v-model=\"emailForm.rememberMe\">记住我</el-checkbox>\r\n        </el-form-item>\r\n        <el-form-item style=\"text-align: center\" label-width=\"0\">\r\n          <el-button type=\"primary\" :disabled=\"disabled\" :loading=\"loading\" @click=\"submitForm(loginMethods[1])\">登录</el-button>\r\n          <el-button  @click=\"goRegister\">注册</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n\r\n    <!-- 768px及以下的登录表单 -->\r\n    <!-- 用户名登录表单 -->\r\n    <el-col class=\"form hidden-sm-and-up\" v-if=\"swicth\">\r\n      <div class=\"switch-button\"><span @click=\"swicth = !swicth\">邮箱登录</span></div>\r\n      <el-form :model=\"usernameForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" label-position=\"top\">\r\n        <el-form-item  label=\"用户名\" prop=\"username\" style=\"text-align: center\">\r\n          <el-input type=\"text\" v-model=\"usernameForm.username\" autocomplete=\"off\" placeholder=\"输入你注册时的用户名哟~\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\" style=\"text-align: center\">\r\n          <el-input type=\"password\" v-model=\"usernameForm.password\" autocomplete=\"off\" placeholder=\"输入你的密码哟~\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"0\" style=\"text-align: center\">\r\n          <el-checkbox v-model=\"usernameForm.rememberMe\">记住我</el-checkbox>\r\n        </el-form-item>\r\n        <el-form-item style=\"text-align: center\" label-width=\"0\">\r\n          <el-button type=\"primary\" :disabled=\"disabled\" :loading=\"loading\" @click=\"submitForm(loginMethods[0])\">登录</el-button>\r\n          <el-button @click=\"goRegister\">注册</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n    <!-- 邮箱登录表单 -->\r\n    <el-col class=\"form hidden-sm-and-up\" v-if=\"!swicth\">\r\n      <div class=\"switch-button\"><span @click=\"swicth = !swicth\">用户名登录</span></div>\r\n      <el-form :model=\"emailForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" label-position=\"top\">\r\n        <el-form-item  label=\"邮箱\" prop=\"email\" style=\"text-align: center\">\r\n          <el-input type=\"text\" v-model=\"emailForm.email\" autocomplete=\"off\" placeholder=\"输入你注册时的邮箱哟~\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\" style=\"text-align: center\">\r\n          <el-input type=\"password\" v-model=\"emailForm.password\" autocomplete=\"off\" placeholder=\"输入你的密码哟~\" ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"0\" style=\"text-align: center\">\r\n          <el-checkbox v-model=\"emailForm.rememberMe\">记住我</el-checkbox>\r\n        </el-form-item>\r\n        <el-form-item style=\"text-align: center\" label-width=\"0\">\r\n          <el-button type=\"primary\" :disabled=\"disabled\" :loading=\"loading\" @click=\"submitForm(loginMethods[1])\">登录</el-button>\r\n          <el-button  @click=\"goRegister\">注册</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n\r\n  </el-row>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: \"LoginMain\",\r\n  data() {\r\n    var validateUsername = (rule, value, callback) => {\r\n      // 验证用户名的正则表达式\r\n      let regLetter = /^[A-Za-z0-9]+$/;\r\n\r\n      if (value === '') {\r\n        callback(new Error('输入你注册时的用户名呀~'));\r\n      } else if (regLetter.test(value) !== true) {\r\n        callback(new Error('用户名不符合啦！'));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    var validateEmail = (rule, value, callback) => {\r\n      // 验证邮箱的正则表达式\r\n      let regEmail = /^[A-Za-z\\d]+([-_.][A-Za-z\\d]+)*@([A-Za-z\\d]+[-.])+[A-Za-z\\d]{2,4}$/;\r\n\r\n      if (value === '') {\r\n        callback(new Error('输入你注册时的邮箱呀~'));\r\n      } else if (regEmail.test(value) !== true) {\r\n        callback(new Error('邮箱不符合啦！'))\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    var validatePass = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('输入你的密码呀~'));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      swicth: true,\r\n      loading: false,\r\n      disabled: false,\r\n      loginMethods: ['username', 'email'],\r\n      usernameForm: {\r\n        username: '',\r\n        password: '',\r\n        rememberMe: false,\r\n      },\r\n      emailForm: {\r\n        email: '',\r\n        password: '',\r\n        rememberMe: false,\r\n      },\r\n      rules: {\r\n        username: [\r\n          {validator: validateUsername, trigger: 'blur'}\r\n        ],\r\n        email: [\r\n          {validator: validateEmail, trigger: 'blur'}\r\n        ],\r\n        password: [\r\n          {validator: validatePass, trigger: 'blur'}\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm(loginMethod) {\r\n      // 开启登录按钮的加载动画\r\n      this.loading = true;\r\n      // axios异步任务强行变为同步任务\r\n      let loginFrom = null;\r\n      console.log(this.$store)\r\n      if (loginMethod === 'username') {\r\n        // 将表单的数据进行封装\r\n        loginFrom = {\r\n          method: loginMethod,\r\n          username: this.usernameForm.username,\r\n          password: this.usernameForm.password,\r\n          rememberMe: this.usernameForm.rememberMe\r\n        }\r\n      }else {\r\n        loginFrom = {\r\n          method: loginMethod,\r\n          username: this.emailForm.email,\r\n          password: this.emailForm.password,\r\n          rememberMe: this.emailForm.rememberMe\r\n        }\r\n      }\r\n      // 调用vuex中的登录请求函数\r\n      this.$store.dispatch('userModel/LoginReq', loginFrom).then(value => {\r\n        if (value.success) {\r\n          // 显示登录成功提示\r\n          this.$message({\r\n            message: value.msg,\r\n            center: true,\r\n            type: 'success',\r\n            duration: 1000*3,\r\n            showClose: true\r\n          })\r\n          // 3秒后返回上一级\r\n          setTimeout(() => {\r\n            this.$router.go(-1);\r\n          }, 1000 * 3)\r\n        } else {\r\n          // 提示登录失败\r\n          this.$message({\r\n            message: value.msg,\r\n            center: true,\r\n            type: 'warning',\r\n            duration: 1000*5,\r\n            showClose: true\r\n          })\r\n          // 清空输入框的数据\r\n          if (loginMethod === 'username') {\r\n            this.usernameForm = {\r\n              username: '',\r\n              password: '',\r\n              rememberMe: false,\r\n            };\r\n          } else {\r\n            this.emailForm = {\r\n              email: '',\r\n              password: '',\r\n              rememberMe: false,\r\n            };\r\n          }\r\n          // 解除加载动画\r\n          this.loading = false;\r\n        }\r\n      }).catch( error => {\r\n        console.log(error);\r\n\r\n        this.loading = false;\r\n        this.disabled = true\r\n        this.$message({\r\n            message: error,\r\n            center: true,\r\n            type: \"error\",\r\n            duration: 1000 * 5,\r\n            showClose: true\r\n        });\r\n\r\n        setTimeout(() => {\r\n          this.disabled = false;\r\n        }, 5000)\r\n      })\r\n    },\r\n    goRegister() {\r\n      this.$router.push({\r\n        path: '/register'\r\n      })\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#login-main {\r\n\r\n  margin-bottom: 100px;\r\n}\r\n.form {\r\n  height: 342px;\r\n}\r\n.switch-button {\r\n  text-align: center;\r\n  margin-top: -35px;\r\n  margin-bottom: 25px;\r\n}\r\n.switch-button span {\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  color: blue;\r\n}\r\n\r\n\r\n</style>"]}]}